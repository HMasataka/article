---
title: "ArgoCDã‚’ç”¨ã„ã¦GitHubã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã®CDã‚’å®Ÿç¾ã™ã‚‹"
emoji: "ğŸ•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["CI", "CD", "Kubernetes", "argocd", "GitHub"]
published: true
---

## ArgoCDã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
kubectl create namespace argocd
```

```bash
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
```

[å‚è€ƒ](https://argo-cd.readthedocs.io/en/stable/getting_started/#1-install-argo-cd)

## ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã¸ã®æ¥ç¶š

```bash
kubectl port-forward svc/argocd-server -n argocd 8080:443
```

`http://localhost:8080`ã«ã‚¢ã‚¯ã‚»ã‚¹ã€`Settings` > `Repositories` > `CONNECT REPO` ã‚’æŠ¼ä¸‹ã€

| è¨­å®šé …ç›® | å€¤ |
| --- | --- |
| connection method | VIA HTTPS |
| Type | git |
| Project | default |
| Repository URL | ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‘ã‚¹ |
| Username | ç©ºæ–‡å­—ä»¥å¤–ã®é©å½“ãªæ–‡å­— |
| Password | GitHubã‹ã‚‰å–å¾—ã—ãŸã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ |

ã‚’è¨­å®šå¾Œ`CONNECT`ã‚’æŠ¼ä¸‹

[GitHubã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã¯ã“ã¡ã‚‰ã‹ã‚‰ç™ºè¡Œ](https://github.com/settings/tokens)

## ArgoCDã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ

```yaml:argocd.yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: sample-argo-cd
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/${GITHUB_ACCOUNT_NAME}/${REPOSITORY_NAME}.git # å¯¾è±¡ã®ãƒªãƒã‚¸ãƒˆãƒª
    targetRevision: main # å¯¾è±¡ã®ãƒ–ãƒ©ãƒ³ãƒ
    path: manifests  # å¯¾è±¡ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
    directory:
      recurse: true
  destination:
    server: https://kubernetes.default.svc
    namespace: default
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
```

ç¾çŠ¶ã¯ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®æŒ‡å®šã¯å‡ºæ¥ãšã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹æ¨¡æ§˜


## ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®é©ç”¨

```bash
kubectl apply -f argocd.yaml
```
