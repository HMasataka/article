---
title: "è‰¯ã„åŠ æ¸›Goã§mysqlã«æ¥ç¶šã™ã‚‹ã¨ãã«DSNã‚’ç›´æ›¸ãã™ã‚‹ã®ã¯ã‚„ã‚ãªã„ï¼Ÿ"
emoji: "ğŸ“"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Go","mysql","DB"]
published: true
---

## ã‚ˆãè¦‹ã‚‹DBæ¥ç¶šä¾‹

Goè¨€èªã‚’ç”¨ã„ã¦mysqlã«æ¥ç¶šã™ã‚‹éš›ã€DBã®æƒ…å ±ã‚’æ–‡å­—åˆ—ã§ç›´æ›¸ãã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ã‚’è‰¯ãã¿ã‚‹

```go
import (
    "database/sql"
    _ "github.com/go-sql-driver/mysql"
)

func main(){
    db, err := sql.Open("mysql", "user:password@tcp(localhost:3306)/db?charset=utf8&parseTime=true")
    // ä»¥ä¸‹çœç•¥
}
```

## ä»Šå›ç´¹ä»‹ã—ãŸã„DBæ¥ç¶šä¾‹

mysqlãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯DSNã‚’çµ„ã¿ç«‹ã¦ã‚‹ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚’åˆ©ç”¨ã™ã‚‹ã»ã†ãŒæ¥½ã ã¨æ„Ÿã˜ã¦ã„ã‚‹

```go
import (
	"database/sql"
	"time"

	"github.com/go-sql-driver/mysql"
)

func connectDB() *sql.DB {
	jst, err := time.LoadLocation("Asia/Tokyo")
	if err != nil {
		// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
	}
	c := mysql.Config{
		DBName:    "db",
		User:      "user",
		Passwd:    "password",
		Addr:      "localhost:3306",
		Net:       "tcp",
		ParseTime: true,
		Collation: "utf8mb4_unicode_ci",
		Loc:       jst,
	}
	db, err := sql.Open("mysql", c.FormatDSN())
    // ä»¥ä¸‹çœç•¥
}
```

å€‹äººçš„ã«ã“ã®é–¢æ•°ã®å­˜åœ¨ã‚’çŸ¥ã‚‹å‰ã«ã¯æ¯åº¦æ¯åº¦æ¥ç¶šæƒ…å ±ã®è¨˜è¼‰é †ã‚’èª¿ã¹ã¦ã„ãŸãŒã€ã“ã®é–¢æ•°ã‚’åˆ©ç”¨ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã‹ã‚‰ã¯ã‹ãªã‚Šæ¥½ã«è¨˜è¼‰å‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã‚ªã‚¹ã‚¹ãƒ¡
