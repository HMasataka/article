---
title: "Electronã§Mainã¨Rendererã‹ã‚‰å…±é€šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã†è¨­å®šæ–¹æ³•"
emoji: "ğŸ·"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Electron", "JavaScript", "TypeScript"]
published: true
---

## ç’°å¢ƒ

electron + vite + react + typescript

## å…±é€šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‹

```tree
src/
â”œâ”€ main/
â”œâ”€ renderer/
â”œâ”€ common/ â† è¿½åŠ 

```

## tsconfig.jsonã‚’è¨­å®šã™ã‚‹

`tsconfig.node.json`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚ (Mainãƒ—ãƒ­ã‚»ã‚¹ç”¨)

```json
{
  "extends": "@electron-toolkit/tsconfig/tsconfig.node.json",
  "include": [
    "electron.vite.config.*",
    "src/main/**/*",
    "src/preload/**/*",
    "src/common/**/*" // è¿½åŠ 
  ],
  "compilerOptions": {
    "composite": true,
    "types": ["electron-vite/node"],
    "paths": {
      "@main/*": ["src/main/*"],
      "@common/*": ["src/common/*"] // è¿½åŠ 
    }
  }
}
```

`tsconfig.web.json`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚ (Rendererãƒ—ãƒ­ã‚»ã‚¹ç”¨)

```json
{
  "extends": "@electron-toolkit/tsconfig/tsconfig.web.json",
  "include": [
    "src/renderer/src/env.d.ts",
    "src/renderer/src/**/*",
    "src/renderer/src/**/*.tsx",
    "src/common/**/*", // è¿½åŠ 
    "src/common/**/*.tsx", // è¿½åŠ 
    "src/preload/*.d.ts"
  ],
  "compilerOptions": {
    "composite": true,
    "jsx": "react-jsx",
    "baseUrl": ".",
    "paths": {
      "@renderer/*": ["src/renderer/src/*"],
      "@common/*": ["src/common/*"] // è¿½åŠ 
    }
  }
}
```

## Viteã®è¨­å®šã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¿½åŠ 

`electron.vite.config.ts` ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚

```typescript
import { resolve } from "path";
import { defineConfig, externalizeDepsPlugin } from "electron-vite";
import react from "@vitejs/plugin-react";
import tailwindcss from "@tailwindcss/vite";

export default defineConfig({
  main: {
    resolve: {
      alias: {
        "@common": resolve("src/common"), // è¿½åŠ 
      },
    },
    plugins: [externalizeDepsPlugin()],
  },
  preload: {
    resolve: {
      alias: {
        "@common": resolve("src/common"), // è¿½åŠ 
      },
    },
    plugins: [externalizeDepsPlugin()],
  },
  renderer: {
    resolve: {
      alias: {
        "@renderer": resolve("src/renderer/src"),
        "@common": resolve("src/common"), // è¿½åŠ 
      },
    },
    plugins: [react(), tailwindcss()],
  },
});
```

## âœ… importã—ã¦ä½¿ã†

è¨­å®šãŒå®Œäº†ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å…±é€šãƒ•ã‚¡ã‚¤ãƒ«ã‚’importã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```tsx
import { commonFunction } from "@common/utils";
```
